(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),l=n(9),i=n(24),u=n(25),d=n(44),s=n(60),f=n(46),m=n.n(f),p={flex:1,display:"flex",flexDirection:"row",alignItems:"center",padding:"20px",paddingLeft:"20px",paddingRight:"20px",borderWidth:2,borderRadius:4,borderColor:"black",borderStyle:"solid",backgroundColor:"#e7e7e7",color:"black",outline:"none",justifyContent:"space-around",fontSize:"18px"},y={backgroundColor:"#3a3a3a",color:"white"},b={borderColor:"white"},E={borderColor:"white",borderStyle:"solid"};var h=function(e){var t=e.addLayersToState,n=e.layers,c=Object(a.useCallback)((function(e){var n,a=[],r=Object(d.a)(e);try{var c=function(){var e=n.value,t=new Promise((function(t){var n=new FileReader;n.readAsText(e),n.onload=function(){return t(JSON.parse(n.result))}}));a.push(t)};for(r.s();!(n=r.n()).done;)c()}catch(o){r.e(o)}finally{r.f()}Promise.all(a).then((function(e){t(e,"upload")}))}),[n]),o=Object(s.a)({accept:".json",onDrop:c}),l=o.getRootProps,i=o.getInputProps,f=o.isDragActive,h=o.isDragAccept,v=o.isDragReject,g=Object(a.useMemo)((function(){return Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},p),f?y:{}),h?b:{}),v?E:{})}),[f,v,h]);return r.a.createElement("div",l({style:g}),r.a.createElement("input",i()),r.a.createElement("text",null,"Upload Layers"),r.a.createElement(m.a,null))},v=n(122),g=n(123),j=n(119),O=n(120),S=n(121),C=function(e){var t=e.layers,n=e.removeLayerFromState,a=e.selectedLayersIndices,c=e.handleSelectedChange;return console.log(a),r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:-1===a.indexOf(e.id)?"layer-item":"layer-item-selected"},r.a.createElement(g.a,{disableGutters:!0,onClick:function(){c(e.id)}},e.name),r.a.createElement(j.a,null),r.a.createElement(O.a,null),r.a.createElement(S.a,{onClick:function(){return n(e.id)}}))})))},L=n(53),k=n.n(L),x=n(51),w=n.n(x),F=n(29),I=n.n(F),R=n(52),G=n.n(R),T=n(28),D=n.n(T),M="10.53.26.143:5000";function N(e){var t=[];return e.forEach((function(e){t=[].concat(Object(l.a)(e.features),Object(l.a)(t))})),{type:"FeatureCollection",features:t}}function J(e,t){var n=N(t);return n.value=10,function(){D.a.post("http://"+M+"/api/buffer",n).then((function(t){e([t.data],"buffer")})).catch((function(e){}))}}function A(e,t){return function(){var n=N(t);D.a.post("http://"+M+"/api/union",n).then((function(t){e([t.data],"union")})).catch((function(e){}))}}function P(e,t){return function(){var n=N(t);D.a.post("http://"+M+"/api/intersection",n).then((function(t){e([t.data],"intersection")})).catch((function(e){}))}}var z=function(e){var t=e.children;return r.a.createElement("div",{className:"headLine"},t)},U=function(e){var t=e.children;return r.a.createElement("div",{className:"operation"},t)},W=function(e){var t=e.addLayersToState,n=e.removeLayersFromState,a=e.removeLayerFromState,c=e.layers,o=e.selectedLayersIndices,l=e.handleSelectedChange,i=c.filter((function(e){return-1!==o.indexOf(e.id)}));return r.a.createElement("div",{className:"sidebar"},r.a.createElement(v.a,{disablePadding:!0},r.a.createElement(z,null,r.a.createElement(g.a,{disableGutters:!0},"Operations"),r.a.createElement(w.a,null)),r.a.createElement(U,null,r.a.createElement(g.a,{disableGutters:!0,onClick:J(t,i)},"Buffer"),r.a.createElement(I.a,null)),r.a.createElement(U,null,r.a.createElement(g.a,{disableGutters:!0,onClick:A(t,i)},"Union"),r.a.createElement(I.a,null)),r.a.createElement(U,null,r.a.createElement(g.a,{disableGutters:!0,onClick:P(t,i)},"Intersection"),r.a.createElement(I.a,null)),r.a.createElement(U,null,r.a.createElement(g.a,{disableGutters:!0,onClick:n},"Remove layers"),r.a.createElement(G.a,null)),r.a.createElement(g.a,{disableGutters:!0},r.a.createElement(h,{accept:"*.json",addLayersToState:t,layers:c})),r.a.createElement(z,null,r.a.createElement(g.a,{disableGutters:!0},"Layers"),r.a.createElement(k.a,null)),r.a.createElement(C,{selectedLayersIndices:o,layers:c,removeLayerFromState:a,handleSelectedChange:l})))},B=n(32),Y=n.n(B),_=n(59);n(100);Y.a.accessToken="pk.eyJ1IjoidG9yc3RlaW4iLCJhIjoiY2s3YWJkdzk3MDU1bjNncnd0dWExN292YiJ9.te0K0gwI11dUd2qZs6FQ0g";var q=function(e){var t=e.layers,n=e.handleSelectedChange,c=e.addLayersToState,o=Object(a.useState)(null),l=Object(i.a)(o,2),u=l[0],d=l[1],s=Object(a.useRef)(null),f=function(e){e.forEach((function(e){u.addSource(e.id,{type:"geojson",data:e}),u.addLayer({id:e.id,type:"fill",source:e.id,layout:{},paint:{"fill-color":e.color,"fill-opacity":.7}})}))},m=function(e){e.forEach((function(e){u.removeLayer(e),u.removeSource(e)}))},p=function(e){return e.getStyle().layers.filter((function(e){return"composite"!==e.source&&"background"!==e.type&&"mapbox-gl-draw-cold"!==e.source&&"mapbox-gl-draw-hot"!==e.source})).map((function(e){return e.id}))};return Object(a.useEffect)((function(){u||function(e,t){var a=new Y.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[10.38,63.43],zoom:13}),r=new _.a({displayControlsDefault:!1,controls:{point:!0,line_string:!0,polygon:!0}});a.addControl(r,"top-right"),a.on("draw.create",(function(e){var t=r.getAll();c([t],"drawTool"),r.deleteAll()})),a.on("load",(function(){e(a),a.resize()})),a.on("click",(function(e){console.log(e);var t=a.queryRenderedFeatures(e.point,{layers:p(a)});t.length&&n(t.map((function(e){return e.layer.id}))[0])}))}(d,s)}),[u]),Object(a.useEffect)((function(){console.log("Map","Layers handled"),u&&function(e,t){var n=p(t),a=n.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t)})),r=e.filter((function(e){return-1===n.indexOf(e.id)}));r[0]&&f(r),a[0]&&m(a)}(t,u)}),[t]),r.a.createElement("div",{ref:function(e){return s.current=e},className:"mapContainer"})};var K=function(e){var t=Object(a.useState)([]),n=Object(i.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)([]),d=Object(i.a)(u,2),s=d[0],f=d[1],m=Object(a.useRef)(s),p=function(e){return function(t,n){t.forEach((function(e){e.id=n+"_"+Math.random().toString(36).slice(2),e.name=n+"_"+Math.random().toString(36).slice(2),e.color=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()})),e((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t))}))}},y=function(){return function(e){console.log(e),-1===m.current.indexOf(e)?(m.current=[].concat(Object(l.a)(m.current),[e]),console.log(m.current),f(m.current)):(m.current=m.current.filter((function(t){return t!==e})),f(m.current))}};return r.a.createElement("div",null,r.a.createElement(W,{addLayersToState:p(o),removeLayersFromState:function(e){return function(){f([]),e([]),m.current=[]}}(o),removeLayerFromState:function(e,t){return function(n){var a=t.filter((function(e){return e.id!==n})),r=m.current.filter((function(e){return e!==n}));f(r),m.current=r,e(a)}}(o,c),layers:c,selectedLayersIndices:s,handleSelectedChange:y()}),r.a.createElement(q,{layers:c,handleSelectedChange:y(),addLayersToState:p(o)}))};o.a.render(r.a.createElement(K,null),document.getElementById("app"))},62:function(e,t,n){e.exports=n(101)}},[[62,1,2]]]);
//# sourceMappingURL=main.772b5719.chunk.js.map