(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),o=a(34),i=a(16),u=a(17),s=a(13),d=a(33),f=a(62),m=a(74),b=a(64),y=a.n(b),E={flex:1,display:"flex",flexDirection:"row",alignItems:"center",padding:"20px",paddingLeft:"20px",paddingRight:"20px",borderWidth:2,borderRadius:4,borderColor:"black",borderStyle:"solid",backgroundColor:"#e7e7e7",color:"black",outline:"none",justifyContent:"space-around",fontSize:"18px"},v={backgroundColor:"#3a3a3a",color:"white"},p={borderColor:"white"},h={borderColor:"white",borderStyle:"solid"};var g=function(e){var t=e.addLayersToState,a=e.layers,c=e.enqueueSnackbar,l=Object(n.useCallback)((function(e){var a,n=[],r=Object(f.a)(e);try{var l=function(){var e=a.value,t=new Promise((function(t){var a=new FileReader;a.readAsText(e),a.onload=function(){return t(JSON.parse(a.result))}}));n.push(t)};for(r.s();!(a=r.n()).done;)l()}catch(o){r.e(o)}finally{r.f()}Promise.all(n).then((function(e){t(e,"upload"),c("Successfully added layers to state",{variant:"success"})}))}),[a]),o=Object(n.useCallback)((function(e){c("Error adding selected layers, try a valid geojson- or json-file",{variant:"error"})}),[a]),u=Object(m.a)({accept:[".json",".geojson"],onDropAccepted:l,onDropRejected:o}),s=u.getRootProps,d=u.getInputProps,b=u.isDragActive,g=u.isDragAccept,C=u.isDragReject,j=Object(n.useMemo)((function(){return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},E),b?v:{}),g?p:{}),C?h:{})}),[b,C,g]);return r.a.createElement("div",s({style:j}),r.a.createElement("input",d()),"Upload Layers",r.a.createElement(y.a,null))},C=a(147),j=a(149),k=a(141),S=a(142),O=a(143),w=a(144),L=a(145),F=a(146),x=function(e){var t=e.value,a=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:a})},M=function(e){var t=e.layer,a=e.removeLayerFromState,c=e.handleMetaChange,l=Object(n.useState)(!1),o=Object(s.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(t.name),f=Object(s.a)(d,2),m=f[0],b=f[1];return r.a.createElement("div",{key:t.id,className:t.selected?"layer-item-selected":"layer-item"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{disableGutters:!0},r.a.createElement(x,{value:m,handleChange:function(e){b(e.target.value)}})),r.a.createElement(k.a,{onClick:function(){b(t.name),u(!1)}}),r.a.createElement(S.a,{onClick:function(){u(!1),c(t.id,"name",m)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{disableGutters:!0,onClick:function(){c(t.id,"selected",!t.selected)}},t.name),"none"!==t.visibility?r.a.createElement(O.a,{onClick:function(){return c(t.id,"visibility","none")}}):r.a.createElement(w.a,{onClick:function(){return c(t.id,"visibility","visible")}}),r.a.createElement(L.a,{onClick:function(){return u(!0)}}),r.a.createElement(F.a,{onClick:function(){return a(t.id)}})))},G=function(e){var t=e.layers,a=e.removeLayerFromState,n=e.selectedLayersIndices,c=e.handleSelectedChange,l=e.handleMetaChange;return r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement(M,{key:e.id,layer:e,removeLayerFromState:a,selectedLayersIndices:n,handleSelectedChange:c,handleMetaChange:l})})))},D=a(67),P=a.n(D),N=a(65),R=a.n(N),I=a(18),T=a.n(I),A=a(66),J=a.n(A),_=function(e){var t=e.value,a=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:a})},q=a(46),B=a.n(q),z="https://tba4251-api.herokuapp.com/api/";function U(e,t){return function(a,n,r){var c=function(e){var t=[];return e.forEach((function(e){t=[].concat(Object(u.a)(e.features),Object(u.a)(t))})),{type:"FeatureCollection",features:t}}(a);return r&&(c.value=r),function(){B.a.post(z+n,c).then((function(a){"symmetric_difference"==n&&(n="sym_diff"),t([a.data],n),e("Successfully computed "+n,{variant:"success"})})).catch((function(t){e("Failed to execute  "+n+" "+t,{variant:"error"})}))}}}function W(e,t){return function(){var a=[];console.log(t),t[0].features.forEach((function(e){var t={type:"FeatureCollection",features:[e]};a=a.concat(t)})),e(a,"split")}}var Y=function(e){var t=e.children;return r.a.createElement("div",{className:"headLine"},t)},K=function(e){var t=e.children,a=e.onClick;return r.a.createElement("div",{className:"operation",onClick:a},t)},Q=function(e){var t=e.addLayersToState,a=e.removeLayersFromState,c=e.removeLayerFromState,l=e.layers,o=e.handleMetaChange,i=e.setDraw,u=l.filter((function(e){return e.selected})),f=Object(n.useState)(!1),m=Object(s.a)(f,2),b=m[0],y=m[1],E=Object(n.useState)(10),v=Object(s.a)(E,2),p=v[0],h=v[1],O=Object(d.b)(),w=O.enqueueSnackbar,L=(O.closeSnackbar,U(w,t));Object(n.useEffect)((function(){!function(e){B.a.get(z+"ping").then((function(t){e("Successfully connected with backend",{variant:"success"})})).catch((function(t){e("Failed to connect with backend",{variant:"success"})}))}(w)}),[]);return r.a.createElement("div",{className:"sidebar"},r.a.createElement(C.a,{disablePadding:!0},r.a.createElement(Y,null,r.a.createElement(j.a,{disableGutters:!0},"Operations"),r.a.createElement(R.a,null)),r.a.createElement(K,{onClick:function(){i((function(e){return e.changeMode("draw_polygon")}))}},r.a.createElement(j.a,{disableGutters:!0},"Draw Polygon"),r.a.createElement(T.a,null)),r.a.createElement(K,null,b?r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{value:p,handleChange:function(e){h(e.target.value)}}),r.a.createElement(k.a,{onClick:function(){return y(!1)}}),r.a.createElement(S.a,{onClick:function(){L(u,"buffer",p)(),y(!1)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{disableGutters:!0,onClick:function(){return y(!0)}},"Featurewise Buffer"),r.a.createElement(T.a,null))),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:L(u,"union")},"N-wise Union"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:L(u,"dissolve")},"N-wise Dissolve"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:W(t,u)},"Featurewise Split"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:L(u,"intersection")},"Pairwise Intersection"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:L(u,"bbox")},"Featurewise Bounding Box"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:L(u,"symmetric_difference")},"Pairwise Symmetric Difference"),r.a.createElement(T.a,null)),r.a.createElement(K,null,r.a.createElement(j.a,{disableGutters:!0,onClick:a},"Remove All Layers"),r.a.createElement(J.a,null)),r.a.createElement(j.a,{disableGutters:!0},r.a.createElement(g,{accept:"*.json",addLayersToState:t,layers:l,enqueueSnackbar:w})),r.a.createElement(Y,null,r.a.createElement(j.a,{disableGutters:!0},"Layers"),r.a.createElement(P.a,null)),r.a.createElement(G,{layers:l,removeLayerFromState:c,handleMetaChange:o})))},Z=a(47),H=a.n(Z);a(103);H.a.accessToken="pk.eyJ1IjoidG9yc3RlaW4iLCJhIjoiY2s3YWJkdzk3MDU1bjNncnd0dWExN292YiJ9.te0K0gwI11dUd2qZs6FQ0g";var V=function(e){var t=e.layers,a=(e.handleSelectedChange,e.addLayersToState),c=e.handleMetaChange,l=e.draw,o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],d=i[1],f=Object(n.useRef)(null),m=function(e){e.forEach((function(e){u.addSource(e.id,{type:"geojson",data:e}),u.addLayer({id:e.id,type:"fill",source:e.id,layout:{visibility:"visible"},paint:{"fill-color":e.color,"fill-opacity":.7,"fill-outline-color":e.color}})}))},b=function(e){e.forEach((function(e){u.removeLayer(e),u.removeSource(e)}))},y=function(e){return e.getStyle().layers.filter((function(e){return"composite"!==e.source&&"background"!==e.type&&"mapbox-gl-draw-cold"!==e.source&&"mapbox-gl-draw-hot"!==e.source})).map((function(e){return e.id}))},E=function(e){e.forEach((function(e){u.getLayoutProperty(e.id,"visibility")!==e.visibility&&u.setLayoutProperty(e.id,"visibility",e.visibility)}))},v=function(e){e.forEach((function(e){e.selected?u.setPaintProperty(e.id,"fill-outline-color","#000000"):u.setPaintProperty(e.id,"fill-outline-color",e.color)}))};return Object(n.useEffect)((function(){u||function(e,t){var n=new H.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[10.38,63.43],zoom:13});function r(e){var t=l.getAll();a([t],"drawTool"),l.deleteAll(),console.log(l)}n.on("load",(function(){e(n),n.addControl(l),n.on("draw.create",r),n.resize()})),n.on("click",(function(e){var t=n.queryRenderedFeatures(e.point,{layers:y(n)});t.length&&c(t.map((function(e){return e.layer.id}))[0],"selected")}))}(d,f)}),[u]),Object(n.useEffect)((function(){u&&function(e,t){var a=y(t),n=a.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t)})),r=e.filter((function(e){return-1===a.indexOf(e.id)}));r[0]&&m(r),n[0]&&b(n),E(e),v(e)}(t,u),console.log("Map","Layers handled")}),[t]),r.a.createElement("div",{ref:function(e){return f.current=e},className:"mapContainer"})};var X=a(73),$=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],f=Object(n.useState)(new X.a({displayControlsDefault:!1,controls:{point:!1,line_string:!1,polygon:!1}})),m=Object(s.a)(f,2),b=m[0],y=m[1],E=function(e){return function(t,a){t.forEach((function(e){e.id=a+"_"+Math.random().toString(36).slice(2),e.name=a+"_"+Math.random().toString(36).slice(2),e.color=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()})),e((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t))}))}},v=function(e){return function(t,a,n){e(n||"selected"!==a?function(e){return e.map((function(e){return e.id===t?Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},a,n)):e}))}:function(e){return e.map((function(e){return e.id===t?Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},a,!e.selected)):e}))})}};return r.a.createElement(d.a,{maxSnack:3},r.a.createElement("div",null,r.a.createElement(Q,{addLayersToState:E(l),removeLayersFromState:function(e){return function(){e([])}}(l),removeLayerFromState:function(e,t){return function(a){var n=t.filter((function(e){return e.id!==a}));e(n)}}(l,c),layers:c,handleMetaChange:v(l),setDraw:y}),r.a.createElement(V,{layers:c,addLayersToState:E(l),handleMetaChange:v(l),draw:b})))};l.a.render(r.a.createElement($,null),document.getElementById("app"))},77:function(e,t,a){e.exports=a(116)}},[[77,1,2]]]);
//# sourceMappingURL=main.3a8889d0.chunk.js.map