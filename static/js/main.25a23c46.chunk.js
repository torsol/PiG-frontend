(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),l=n.n(c),o=n(22),i=n(11),u=n(12),d=n(10),s=n(46),f=n(62),m=n(48),b=n.n(m),y={flex:1,display:"flex",flexDirection:"row",alignItems:"center",padding:"20px",paddingLeft:"20px",paddingRight:"20px",borderWidth:2,borderRadius:4,borderColor:"black",borderStyle:"solid",backgroundColor:"#e7e7e7",color:"black",outline:"none",justifyContent:"space-around",fontSize:"18px"},p={backgroundColor:"#3a3a3a",color:"white"},v={borderColor:"white"},h={borderColor:"white",borderStyle:"solid"};var E=function(e){var t=e.addLayersToState,n=e.layers,c=Object(a.useCallback)((function(e){var n,a=[],r=Object(s.a)(e);try{var c=function(){var e=n.value,t=new Promise((function(t){var n=new FileReader;n.readAsText(e),n.onload=function(){return t(JSON.parse(n.result))}}));a.push(t)};for(r.s();!(n=r.n()).done;)c()}catch(l){r.e(l)}finally{r.f()}Promise.all(a).then((function(e){t(e,"upload")}))}),[n]),l=Object(f.a)({accept:".json",onDrop:c}),o=l.getRootProps,u=l.getInputProps,d=l.isDragActive,m=l.isDragAccept,E=l.isDragReject,g=Object(a.useMemo)((function(){return Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},y),d?p:{}),m?v:{}),E?h:{})}),[d,E,m]);return r.a.createElement("div",o({style:g}),r.a.createElement("input",u()),"Upload Layers",r.a.createElement(b.a,null))},g=n(126),C=n(127),j=n(120),O=n(121),S=n(122),k=n(123),L=n(124),x=n(125),F=function(e){var t=e.value,n=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:n})},M=function(e){var t=e.layer,n=e.removeLayerFromState,c=e.handleMetaChange,l=Object(a.useState)(!1),o=Object(d.a)(l,2),i=o[0],u=o[1],s=Object(a.useState)(t.name),f=Object(d.a)(s,2),m=f[0],b=f[1];return r.a.createElement("div",{key:t.id,className:t.selected?"layer-item-selected":"layer-item"},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{disableGutters:!0},r.a.createElement(F,{value:m,handleChange:function(e){b(e.target.value)}})),r.a.createElement(j.a,{onClick:function(){b(t.name),u(!1)}}),r.a.createElement(O.a,{onClick:function(){u(!1),c(t.id,"name",m)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{disableGutters:!0,onClick:function(){c(t.id,"selected",!t.selected)}},t.name),"none"!==t.visibility?r.a.createElement(S.a,{onClick:function(){return c(t.id,"visibility","none")}}):r.a.createElement(k.a,{onClick:function(){return c(t.id,"visibility","visible")}}),r.a.createElement(L.a,{onClick:function(){return u(!0)}}),r.a.createElement(x.a,{onClick:function(){return n(t.id)}})))},w=function(e){var t=e.layers,n=e.removeLayerFromState,a=e.selectedLayersIndices,c=e.handleSelectedChange,l=e.handleMetaChange;return r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement(M,{key:e.id,layer:e,removeLayerFromState:n,selectedLayersIndices:a,handleSelectedChange:c,handleMetaChange:l})})))},G=n(55),I=n.n(G),R=n(53),T=n.n(R),D=n(30),N=n.n(D),A=n(54),J=n.n(A),P=function(e){var t=e.value,n=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:n})},z=n(29),U=n.n(z),W="https://tba4251-api.herokuapp.com/";function B(e){var t=[];return e.forEach((function(e){t=[].concat(Object(u.a)(e.features),Object(u.a)(t))})),{type:"FeatureCollection",features:t}}function Y(e,t){return function(){var n=B(t);U.a.post(W+"/api/union",n).then((function(t){e([t.data],"union")})).catch((function(e){}))}}function _(e,t){return function(){var n=B(t);U.a.post(W+"/api/intersection",n).then((function(t){e([t.data],"intersection")})).catch((function(e){}))}}var q=function(e){var t=e.children;return r.a.createElement("div",{className:"headLine"},t)},K=function(e){var t=e.children;return r.a.createElement("div",{className:"operation"},t)},Q=function(e){var t=e.addLayersToState,n=e.removeLayersFromState,c=e.removeLayerFromState,l=e.layers,o=e.handleMetaChange,i=l.filter((function(e){return e.selected})),u=Object(a.useState)(!1),s=Object(d.a)(u,2),f=s[0],m=s[1],b=Object(a.useState)(10),y=Object(d.a)(b,2),p=y[0],v=y[1];return r.a.createElement("div",{className:"sidebar"},r.a.createElement(g.a,{disablePadding:!0},r.a.createElement(q,null,r.a.createElement(C.a,{disableGutters:!0},"Operations"),r.a.createElement(T.a,null)),r.a.createElement(K,null,f?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{value:p,handleChange:function(e){v(e.target.value)}}),r.a.createElement(j.a,{onClick:function(){return m(!1)}}),r.a.createElement(O.a,{onClick:function(){!function(e,t,n){var a=B(t);return a.value=n,function(){U.a.post(W+"/api/buffer",a).then((function(t){e([t.data],"buffer")})).catch((function(e){}))}}(t,i,p)(),m(!1),console.log()}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{disableGutters:!0,onClick:function(){return m(!0)}},"Buffer"),r.a.createElement(N.a,null))),r.a.createElement(K,null,r.a.createElement(C.a,{disableGutters:!0,onClick:Y(t,i)},"Union"),r.a.createElement(N.a,null)),r.a.createElement(K,null,r.a.createElement(C.a,{disableGutters:!0,onClick:_(t,i)},"Intersection"),r.a.createElement(N.a,null)),r.a.createElement(K,null,r.a.createElement(C.a,{disableGutters:!0,onClick:n},"Remove All Layers"),r.a.createElement(J.a,null)),r.a.createElement(C.a,{disableGutters:!0},r.a.createElement(E,{accept:"*.json",addLayersToState:t,layers:l})),r.a.createElement(q,null,r.a.createElement(C.a,{disableGutters:!0},"Layers"),r.a.createElement(I.a,null)),r.a.createElement(w,{layers:l,removeLayerFromState:c,handleMetaChange:o})))},Z=n(33),H=n.n(Z),V=n(61);n(102);H.a.accessToken="pk.eyJ1IjoidG9yc3RlaW4iLCJhIjoiY2s3YWJkdzk3MDU1bjNncnd0dWExN292YiJ9.te0K0gwI11dUd2qZs6FQ0g";var X=function(e){var t=e.layers,n=(e.handleSelectedChange,e.addLayersToState),c=e.handleMetaChange,l=Object(a.useState)(null),o=Object(d.a)(l,2),i=o[0],u=o[1],s=Object(a.useRef)(null),f=function(e){e.forEach((function(e){i.addSource(e.id,{type:"geojson",data:e}),i.addLayer({id:e.id,type:"fill",source:e.id,layout:{visibility:"visible"},paint:{"fill-color":e.color,"fill-opacity":.7}})}))},m=function(e){e.forEach((function(e){i.removeLayer(e),i.removeSource(e)}))},b=function(e){return e.getStyle().layers.filter((function(e){return"composite"!==e.source&&"background"!==e.type&&"mapbox-gl-draw-cold"!==e.source&&"mapbox-gl-draw-hot"!==e.source})).map((function(e){return e.id}))},y=function(e){e.forEach((function(e){i.getLayoutProperty(e.id,"visibility")!==e.visibility&&i.setLayoutProperty(e.id,"visibility",e.visibility)}))};return Object(a.useEffect)((function(){i||function(e,t){var a=new H.a.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[10.38,63.43],zoom:13}),r=new V.a({displayControlsDefault:!1,controls:{point:!0,line_string:!0,polygon:!0}});a.addControl(r,"top-right"),a.on("draw.create",(function(e){var t=r.getAll();n([t],"drawTool"),r.deleteAll()})),a.on("load",(function(){e(a),a.resize()})),a.on("click",(function(e){var t=a.queryRenderedFeatures(e.point,{layers:b(a)});t.length&&c(t.map((function(e){return e.layer.id}))[0],"selected")}))}(u,s)}),[i]),Object(a.useEffect)((function(){console.log("Map","Layers handled"),i&&function(e,t){var n=b(t),a=n.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t)})),r=e.filter((function(e){return-1===n.indexOf(e.id)}));r[0]&&f(r),a[0]&&m(a),y(e)}(t,i)}),[t]),r.a.createElement("div",{ref:function(e){return s.current=e},className:"mapContainer"})};var $=function(e){var t=Object(a.useState)([]),n=Object(d.a)(t,2),c=n[0],l=n[1],s=function(e){return function(t,n){t.forEach((function(e){e.id=n+"_"+Math.random().toString(36).slice(2),e.name=n+"_"+Math.random().toString(36).slice(2),e.color=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()})),e((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t))}))}},f=function(e){return function(t,n,a){e(a||"selected"!==n?function(e){return e.map((function(e){return e.id===t?Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},n,a)):e}))}:function(e){return e.map((function(e){return e.id===t?Object(i.a)(Object(i.a)({},e),{},Object(o.a)({},n,!e.selected)):e}))})}};return r.a.createElement("div",null,r.a.createElement(Q,{addLayersToState:s(l),removeLayersFromState:function(e){return function(){e([])}}(l),removeLayerFromState:function(e,t){return function(n){var a=t.filter((function(e){return e.id!==n}));e(a)}}(l,c),layers:c,handleMetaChange:f(l)}),r.a.createElement(X,{layers:c,addLayersToState:s(l),handleMetaChange:f(l)}))};l.a.render(r.a.createElement($,null),document.getElementById("app"))},64:function(e,t,n){e.exports=n(103)}},[[64,1,2]]]);
//# sourceMappingURL=main.25a23c46.chunk.js.map