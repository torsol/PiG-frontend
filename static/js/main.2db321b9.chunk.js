(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{124:function(e){e.exports=JSON.parse('{"draw_polygon":"Select the edges of the polygon you wish to create. Finish by clicking on the initial edge, closing the polygon.","buffer":"Select one or more layers, then press \\"Buffer\\". It will ask how large buffer you want, supply this quantity in meters. Click on the checkmark to calculate. ","union":"Select two or more layers, then press union. The output will be one layer, consisting of the union of the selected layers.","dissolve":"Select one layer, then press dissolve. The output will be the input features combined into one multifeature.","split":"Select one or more layers, then press split. The output will be each of the selected features as a layer. Will NOT split a dissolved layer.","intersection":"Select two layers, then press intersection. The output will be the overlapping areas of the two layers.","bbox":"Select one or more layers, then press bbox. The output will be a layer containing the minimal bounding boxes for all features in selected layers.","symmetric_difference":"Select two layers, then press symmetric difference. The output will be a layer containing all non-overlapping areas between the layers."}')},137:function(e){e.exports=JSON.parse('[{"title":"Welcome","image":"welcome.png","detailed":"This is a webGis created in the course TBA4251 at NTNU. To get a quick overview of the different functionality this GIS has to offer, I have created this tutorial. You can show and hide it as you please by using the \\"HIDE TUTORIAL\\" button at the bottom. \\n Follow along with the instructions, using the arrows to go forwards or backwards. Enjoy!"},{"title":"Control Panel","image":"control_panel.png","detailed":"The main operating element of the app is the control panel in the top left corner. From this panel, you can add, remove, and manipulate layers in numerous ways. \\n We will go through all the available functionality in this tutorial."},{"title":"Tooltip","image":"tooltip.png","detailed":"In adition to that, each function has a small tooltip that explains how to use it. Open this tooltip by clicking on the \\"question mark\\" accociated with each function!"}]')},138:function(e,t,n){var a={"./control_panel.png":139,"./polygon.png":140,"./tooltip.png":141,"./welcome.png":142};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=138},139:function(e,t,n){e.exports=n.p+"static/media/control_panel.99a5a2cd.png"},140:function(e,t,n){e.exports=n.p+"static/media/polygon.6b958f71.png"},141:function(e,t,n){e.exports=n.p+"static/media/tooltip.d25c112d.png"},142:function(e,t,n){e.exports=n.p+"static/media/welcome.b8da382a.png"},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),l=n.n(o),i=n(39),c=n(22),u=n(23),s=n(14),d=n(49),f=n(78),m=n(91),p=n(80),h=n.n(p),b={flex:1,display:"flex",flexDirection:"row",alignItems:"center",padding:"20px",paddingLeft:"20px",paddingRight:"20px",borderWidth:2,borderRadius:4,borderColor:"black",borderStyle:"solid",backgroundColor:"#43a047",color:"white",outline:"none",justifyContent:"space-around",fontSize:"18px"},y={backgroundColor:"#3a3a3a",color:"white"},g={borderColor:"white"},v={borderColor:"white",borderStyle:"solid"};var E=function(e){var t=e.addLayersToState,n=e.layers,o=e.enqueueSnackbar,l=Object(a.useCallback)((function(e){var n,a=[],r=Object(f.a)(e);try{var l=function(){var e=n.value,t=new Promise((function(t){var n=new FileReader;n.readAsText(e),n.onload=function(){return t(JSON.parse(n.result))}}));a.push(t)};for(r.s();!(n=r.n()).done;)l()}catch(i){r.e(i)}finally{r.f()}Promise.all(a).then((function(e){t(e,"upload"),o("Successfully added layers to state",{variant:"success"})}))}),[n]),i=Object(a.useCallback)((function(e){o("Error adding selected layers, try a valid geojson- or json-file",{variant:"error"})}),[n]),u=Object(m.a)({accept:[".json",".geojson"],onDropAccepted:l,onDropRejected:i}),s=u.getRootProps,d=u.getInputProps,p=u.isDragActive,E=u.isDragAccept,w=u.isDragReject,k=Object(a.useMemo)((function(){return Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},b),p?y:{}),E?g:{}),w?v:{})}),[p,w,E]);return r.a.createElement("div",s({style:k}),r.a.createElement("input",d()),"Upload Layers",r.a.createElement(h.a,null))},w=n(187),k=n(197),C=n(180),S=n(181),j=n(182),O=n(183),x=n(184),T=n(185),L=function(e){var t=e.value,n=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:n})},N=function(e){var t=e.layer,n=e.removeLayerFromState,o=e.handleMetaChange,l=Object(a.useState)(!1),i=Object(s.a)(l,2),c=i[0],u=i[1],d=Object(a.useState)(t.name),f=Object(s.a)(d,2),m=f[0],p=f[1];return r.a.createElement("div",{key:t.id,className:t.selected?"layer-item-selected":"layer-item"},c?r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{disableGutters:!0},r.a.createElement(L,{value:m,handleChange:function(e){p(e.target.value)}})),r.a.createElement(C.a,{onClick:function(){p(t.name),u(!1)}}),r.a.createElement(S.a,{onClick:function(){u(!1),o(t.id,"name",m)}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{disableGutters:!0,onClick:function(){o(t.id,"selected",!t.selected)}},t.name),"none"!==t.visibility?r.a.createElement(j.a,{onClick:function(){return o(t.id,"visibility","none")}}):r.a.createElement(O.a,{onClick:function(){return o(t.id,"visibility","visible")}}),r.a.createElement(x.a,{onClick:function(){return u(!0)}}),r.a.createElement(T.a,{onClick:function(){return n(t.id)}})))},F=function(e){var t=e.layers,n=e.removeLayerFromState,a=e.selectedLayersIndices,o=e.handleSelectedChange,l=e.handleMetaChange;return r.a.createElement("div",null,t&&t.map((function(e){return r.a.createElement(N,{key:e.id,layer:e,removeLayerFromState:n,selectedLayersIndices:a,handleSelectedChange:o,handleMetaChange:l})})))},M=n(84),D=n.n(M),_=n(83),I=n.n(_),P=n(56),R=n.n(P),z="https://tba4251-api.herokuapp.com/api/";function A(e,t){return function(n,a,r){var o=function(e){var t=[];return e.forEach((function(e){t=[].concat(Object(u.a)(e.features),Object(u.a)(t))})),{type:"FeatureCollection",features:t}}(n);return r&&(o.value=r),function(){R.a.post(z+a,o).then((function(n){"symmetric_difference"===a&&(a="sym_diff"),t([n.data],a),e("Successfully computed "+a,{variant:"success"})})).catch((function(t){e("Failed to execute  "+a+" "+t,{variant:"error"})}))}}}function B(e,t){return function(){var n=[];console.log(t),t[0].features.forEach((function(e){var t={type:"FeatureCollection",features:[e]};n=n.concat(t)})),e(n,"split")}}var G=n(179),q=n(195),J=n(50),U=n(82),W=n.n(U),Y=function(e){var t=e.value,n=e.handleChange;return r.a.createElement("input",{type:"text",value:t,onChange:n})},H=n(5),K=n(196),Q=Object(H.a)({tooltip:{fontSize:"13px"}})(K.a),Z=function(e){var t=e.onClick,n=e.name,o=e.icon,l=e.selectable,i=e.enabled,c=e.popoverText,u=Object(a.useState)(!1),d=Object(s.a)(u,2),f=d[0],m=d[1],p=Object(a.useState)(10),h=Object(s.a)(p,2),b=h[0],y=h[1],g=Object(G.a)((function(e){return{typography:{padding:e.spacing(2),width:200,fontSize:"13px",boxShadow:"0px",border:"1px",borderStyle:"solid",borderColor:"black",borderRadius:"4px"}}})),v=function(){return i?m(!f):null},E=function(e){i&&(t(e),v())},w=g(),j=r.a.useState(null),O=Object(s.a)(j,2),x=O[0],T=O[1];var L=Boolean(x),N=L?"simple-popover":null;return r.a.createElement(r.a.Fragment,null,f?r.a.createElement("div",{className:"operation"},r.a.createElement(Q,{title:"Enter buffer [m]"},r.a.createElement(k.a,{disableGutters:!0},r.a.createElement(Y,{value:b,handleChange:function(e){return y(e.target.value)}}))),r.a.createElement(C.a,{onClick:v}),r.a.createElement(S.a,{onClick:function(){return E(b)}})):r.a.createElement("div",{className:"operationdiv"},r.a.createElement(k.a,{onClick:l?v:function(){return i?t():null},className:i?"operation":"disabledOperation",disableGutters:!0},n),o||r.a.createElement(W.a,{onClick:function(e){T(e.currentTarget)}})),r.a.createElement(q.a,{id:N,open:L,anchorEl:x,onClose:function(){T(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(J.a,{className:w.typography},c)))},V=n(124),X=function(e){var t=e.children;return r.a.createElement("div",{className:"headLine"},t)},$=function(e){var t=e.addLayersToState,n=e.removeLayersFromState,o=e.removeLayerFromState,l=e.layers,i=e.handleMetaChange,c=e.setDraw,u=l.filter((function(e){return e.selected})),s=Object(d.b)().enqueueSnackbar,f=A(s,t);return Object(a.useEffect)((function(){!function(e){R.a.get(z+"ping").then((function(t){e("Successfully connected with backend",{variant:"success"})})).catch((function(t){e("Failed to connect with backend",{variant:"success"})}))}(s)}),[]),r.a.createElement("div",{className:"sidebar"},r.a.createElement(w.a,{disablePadding:!0},r.a.createElement(X,null,r.a.createElement(k.a,{disableGutters:!0},"Control Panel")),r.a.createElement(Z,{onClick:function(){c((function(e){return e.changeMode("draw_polygon")}))},name:"Draw Polygon",enabled:!0,popoverText:V.draw_polygon}),r.a.createElement(Z,{name:"Buffer",onClick:function(e){f(u,"buffer",e)()},selectable:!0,enabled:u.length>=1,popoverText:V.buffer}),r.a.createElement(Z,{name:"Union",onClick:f(u,"union"),enabled:u.length>=2,popoverText:V.union}),r.a.createElement(Z,{name:"Dissolve",onClick:f(u,"dissolve"),enabled:1===u.length,popoverText:V.dissolve}),r.a.createElement(Z,{onClick:B(t,u),name:"Split",enabled:u.length>=1,popoverText:V.split}),r.a.createElement(Z,{onClick:f(u,"intersection"),name:"Intersection",enabled:2===u.length,popoverText:V.intersection}),r.a.createElement(Z,{onClick:f(u,"bbox"),name:"Bounding Box",enabled:u.length>=1,popoverText:V.bbox}),r.a.createElement(Z,{onClick:f(u,"symmetric_difference"),name:"Symmetric Difference",enabled:2===u.length,popoverText:V.symmetric_difference}),r.a.createElement(Z,{onClick:n,name:"Remove All Layers",icon:r.a.createElement(I.a,null),enabled:l.length>0}),r.a.createElement(k.a,{disableGutters:!0},r.a.createElement(E,{accept:"*.json",addLayersToState:t,layers:l,enqueueSnackbar:s})),r.a.createElement(X,null,r.a.createElement(k.a,{disableGutters:!0},"Layers"),r.a.createElement(D.a,null)),r.a.createElement(F,{layers:l,removeLayerFromState:o,handleMetaChange:i})))},ee=n(57),te=n.n(ee);n(125);te.a.accessToken="pk.eyJ1IjoidG9yc3RlaW4iLCJhIjoiY2s3YWJkdzk3MDU1bjNncnd0dWExN292YiJ9.te0K0gwI11dUd2qZs6FQ0g";var ne=function(e){var t=e.layers,n=(e.handleSelectedChange,e.addLayersToState),o=e.handleMetaChange,l=e.draw,i=Object(a.useState)(null),c=Object(s.a)(i,2),u=c[0],d=c[1],f=Object(a.useRef)(null),m=function(e){e.forEach((function(e){u.addSource(e.id,{type:"geojson",data:e}),u.addLayer({id:e.id,type:"fill",source:e.id,layout:{visibility:"visible"},paint:{"fill-color":e.color,"fill-opacity":.7,"fill-outline-color":e.color}})}))},p=function(e){e.forEach((function(e){u.removeLayer(e),u.removeSource(e)}))},h=function(e){return e.getStyle().layers.filter((function(e){return"composite"!==e.source&&"background"!==e.type&&"mapbox-gl-draw-cold"!==e.source&&"mapbox-gl-draw-hot"!==e.source})).map((function(e){return e.id}))},b=function(e){e.forEach((function(e){u.getLayoutProperty(e.id,"visibility")!==e.visibility&&u.setLayoutProperty(e.id,"visibility",e.visibility)}))},y=function(e){e.forEach((function(e){e.selected?u.setPaintProperty(e.id,"fill-outline-color","#000000"):u.setPaintProperty(e.id,"fill-outline-color",e.color)}))};return Object(a.useEffect)((function(){u||function(e,t){var a=new te.a.Map({container:t.current,style:"mapbox://styles/torstein/ckhxghcb708qg19mtz7urlkdx",center:[10.38,63.43],zoom:13});function r(e){var t=l.getAll();n([t],"drawTool"),l.deleteAll(),console.log(l)}a.on("load",(function(){e(a),a.addControl(l),a.on("draw.create",r),a.resize()})),a.on("click",(function(e){var t=a.queryRenderedFeatures(e.point,{layers:h(a)});t.length&&"draw_polygon"!==l.getMode()&&o(t.map((function(e){return e.layer.id}))[0],"selected")}))}(d,f)}),[u]),Object(a.useEffect)((function(){u&&function(e,t){var n=h(t),a=n.filter((function(t){return-1===e.map((function(e){return e.id})).indexOf(t)})),r=e.filter((function(e){return-1===n.indexOf(e.id)}));r[0]&&m(r),a[0]&&p(a),b(e),y(e)}(t,u),console.log("Map","Layers handled")}),[t]),r.a.createElement("div",{ref:function(e){return f.current=e},className:"mapContainer"})};var ae=n(90),re=n(188),oe=n(192),le=n(189),ie=n(193),ce=n(190),ue=n(194),se=n(191),de=n(58),fe=n.n(de),me=n(137),pe=Object(G.a)((function(e){return{media:{height:0,paddingTop:"56.25%"},forward:{},backward:{transform:"rotate(-180deg)"},actions:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:"0px"},content:{paddingTop:"0px",paddingBottom:"0px"}}}));var he=function(){var e=pe(),t=Object(a.useState)(0),o=Object(s.a)(t,2),l=o[0],i=o[1],c=Object(a.useState)(!1),u=Object(s.a)(c,2),d=u[0],f=u[1],m=function(){f(!d)};return d?r.a.createElement(re.a,{className:"tutorial"},r.a.createElement(le.a,{className:e.media,image:n(138)("./"+me[l].image)}),r.a.createElement(ce.a,{className:e.actions},r.a.createElement(se.a,{className:e.backward,onClick:function(){l-1>=0&&i(l-1)}},r.a.createElement(fe.a,null)),r.a.createElement(oe.a,{title:me[l].title,titleTypographyProps:{variant:"h6"}}),r.a.createElement(se.a,{className:e.forward,onClick:function(){l+1<me.length&&i(l+1)}},r.a.createElement(fe.a,null))),r.a.createElement(ie.a,{className:e.content},r.a.createElement(J.a,{variant:"body2",color:"textSecondary",component:"p"},me[l].detailed.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)})))),r.a.createElement(ce.a,null,r.a.createElement(ue.a,{size:"small",color:"black",onClick:m},"Hide tutorial"))):r.a.createElement(re.a,{className:"showtutorial"},r.a.createElement(ue.a,{size:"large",onClick:m},"Show Tutorial"))},be=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),o=n[0],l=n[1],f=Object(a.useState)(new ae.a({displayControlsDefault:!1,controls:{point:!1,line_string:!1,polygon:!1}})),m=Object(s.a)(f,2),p=m[0],h=m[1],b=function(e){return function(t,n){t.forEach((function(e){e.id=n+"_"+Math.random().toString(36).slice(2),e.name=n+"_"+Math.random().toString(36).slice(2),e.color=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()})),e((function(e){return[].concat(Object(u.a)(e),Object(u.a)(t))}))}},y=function(e){return function(t,n,a){e(a||"selected"!==n?function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},n,a)):e}))}:function(e){return e.map((function(e){return e.id===t?Object(c.a)(Object(c.a)({},e),{},Object(i.a)({},n,!e.selected)):e}))})}};return r.a.createElement(d.a,{maxSnack:3},r.a.createElement("div",null,r.a.createElement($,{addLayersToState:b(l),removeLayersFromState:function(e){return function(){e([])}}(l),removeLayerFromState:function(e,t){return function(n){var a=t.filter((function(e){return e.id!==n}));e(a)}}(l,o),layers:o,handleMetaChange:y(l),setDraw:h}),r.a.createElement(ne,{layers:o,addLayersToState:b(l),handleMetaChange:y(l),draw:p}),r.a.createElement(he,null)))};l.a.render(r.a.createElement(be,null),document.getElementById("app"))},98:function(e,t,n){e.exports=n(143)}},[[98,1,2]]]);
//# sourceMappingURL=main.2db321b9.chunk.js.map